{"ast":null,"code":"var _jsxFileName = \"D:\\\\usercode\\\\FinGenius\\\\frontend\\\\src\\\\components\\\\AddInvoice.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Alert from \"./Alert\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddInvoice = ({\n  invoiceType\n}) => {\n  _s();\n  const initialState = {\n    type: invoiceType,\n    invoiceDate: new Date().toISOString().split(\"T\")[0],\n    dueDate: \"\",\n    invoiceNo: \"\",\n    partnerId: \"\",\n    creditTerm: 0,\n    reference: \"\",\n    invoiceTotal: 0,\n    invoiceItems: []\n  };\n  const [invoiceData, setInvoiceData] = useState(initialState);\n  const [partners, setPartners] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [productId, setProductId] = useState(\"\");\n  const [quantity, setQuantity] = useState(1);\n  const [alert, setAlert] = useState(null);\n  const navigate = useNavigate();\n\n  // Fetch initial data for partners, products, and invoice number\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const [partnersRes, productsRes, invoicesRes] = await Promise.all([axios.get(`/partners?type=${invoiceType === \"sales\" ? \"customer\" : \"vendor\"}&status=Active`), axios.get(\"/products?status=Active\"), axios.get(`/invoices?type=${invoiceType}`)]);\n\n        // Set partners data\n        setPartners(partnersRes.data);\n\n        // Set products data (ensure rate and salesTax are numeric)\n        const formattedProducts = productsRes.data.map(product => ({\n          ...product,\n          rate: Number(product.rate) || 0,\n          salesTax: Number(product.salesTax) || 0\n        }));\n        setProducts(formattedProducts);\n\n        // Generate invoice number\n        const nextInvoiceNumber = `${invoiceType === \"sales\" ? \"SI\" : \"PI\"}-${String(invoicesRes.data.length + 1).padStart(4, \"0\")}`;\n        setInvoiceData(prev => ({\n          ...prev,\n          invoiceNo: nextInvoiceNumber\n        }));\n      } catch (error) {\n        setAlert({\n          type: \"error\",\n          message: \"Failed to load initial data. Please try again.\"\n        });\n      }\n    };\n    fetchData();\n  }, [invoiceType]);\n\n  // Handle input changes\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setInvoiceData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Handle credit term change and calculate due date\n  const handleCreditTermChange = e => {\n    const creditTerm = parseInt(e.target.value, 10) || 0;\n    const dueDate = new Date();\n    dueDate.setDate(dueDate.getDate() + creditTerm);\n    setInvoiceData(prev => ({\n      ...prev,\n      creditTerm,\n      dueDate: dueDate.toISOString().split(\"T\")[0]\n    }));\n  };\n\n  // Add product to invoice items\n  const addProduct = () => {\n    const selectedProduct = products.find(product => product._id === productId);\n    if (selectedProduct && quantity > 0) {\n      const rate = Number(selectedProduct.rate);\n      const valueOfSupplies = quantity * rate;\n      const salesTax = valueOfSupplies * selectedProduct.salesTax / 100;\n      const netAmount = valueOfSupplies + salesTax;\n      const newItem = {\n        productId,\n        productName: selectedProduct.name,\n        quantity: Number(quantity),\n        rate: rate.toFixed(2),\n        valueOfSupplies: valueOfSupplies.toFixed(2),\n        salesTax: salesTax.toFixed(2),\n        netAmount: netAmount.toFixed(2)\n      };\n      setInvoiceData(prev => ({\n        ...prev,\n        invoiceItems: [...prev.invoiceItems, newItem],\n        invoiceTotal: prev.invoiceTotal + netAmount\n      }));\n      setProductId(\"\");\n      setQuantity(1);\n    } else {\n      setAlert({\n        type: \"error\",\n        message: \"Please select a product and enter quantity.\"\n      });\n    }\n  };\n\n  // Remove product from invoice items\n  const handleRemoveInvoiceItem = index => {\n    const updatedItems = invoiceData.invoiceItems.filter((_, i) => i !== index);\n    const newTotal = updatedItems.reduce((sum, item) => sum + parseFloat(item.netAmount), 0);\n    setInvoiceData(prev => ({\n      ...prev,\n      invoiceItems: updatedItems,\n      invoiceTotal: newTotal\n    }));\n  };\n\n  // Submit invoice data\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log(\"Final Invoice Data being sent:\", JSON.stringify(invoiceData, null, 2));\n    try {\n      const response = await axios.post(\"/invoices\", invoiceData);\n      if (response.status === 201) {\n        setAlert({\n          type: \"success\",\n          message: \"Invoice added successfully!\"\n        });\n        navigate(`/${invoiceType}invoices`);\n      }\n    } catch (error) {\n      var _error$response, _error$response2, _error$response2$data;\n      console.error(\"Error response:\", ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      setAlert({\n        type: \"error\",\n        message: ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) || \"Failed to add invoice. Please try again.\"\n      });\n    }\n  };\n\n  // Cancel action\n  const handleCancel = () => {\n    navigate(`/${invoiceType}invoices`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [alert && /*#__PURE__*/_jsxDEV(Alert, {\n      type: alert.type,\n      message: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow-lg border-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header bg-gradient-primary text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center mb-0\",\n          children: [\"Add \", invoiceType === \"sales\" ? \"Sales\" : \"Purchase\", \" Invoice\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"mb-3\",\n            children: \"Invoice Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Invoice No\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                className: \"form-control\",\n                value: invoiceData.invoiceNo,\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 172,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: invoiceType === \"sales\" ? \"Customer\" : \"Vendor\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                name: \"partnerId\",\n                value: invoiceData.partnerId,\n                onChange: handleChange,\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 183,\n                  columnNumber: 19\n                }, this), partners.map(partner => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: partner._id,\n                  children: [partner.firstName, \" \", partner.lastName]\n                }, partner._id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Credit Term (days)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"form-control\",\n                value: invoiceData.creditTerm,\n                onChange: handleCreditTermChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-6 mb-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Due Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                className: \"form-control\",\n                value: invoiceData.dueDate,\n                readOnly: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"mb-3\",\n            children: \"Invoice Items\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"form-select\",\n                value: productId,\n                onChange: e => setProductId(e.target.value),\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, this), products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: product._id,\n                  children: product.name\n                }, product._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 21\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 211,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Quantity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                className: \"form-control\",\n                value: quantity,\n                onChange: e => setQuantity(Number(e.target.value)),\n                min: \"1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 224,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-3 mt-4\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-success\",\n                onClick: addProduct,\n                children: \"Add Product\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), invoiceData.invoiceItems.length > 0 && /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table table-striped\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Product\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Quantity\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Rate\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Value\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Tax\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 250,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Net Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  children: \"Actions\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: invoiceData.invoiceItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.productName\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.quantity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\"$\", item.rate]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 260,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\"$\", item.valueOfSupplies]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\"$\", item.salesTax]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: [\"$\", item.netAmount]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 263,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-danger btn-sm\",\n                    onClick: () => handleRemoveInvoiceItem(index),\n                    children: \"Remove\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 264,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-success me-3\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-danger\",\n              onClick: handleCancel,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 157,\n    columnNumber: 5\n  }, this);\n};\n_s(AddInvoice, \"JA7OKCqFWPUL6/ZGO51utdc6Or0=\", false, function () {\n  return [useNavigate];\n});\n_c = AddInvoice;\nexport default AddInvoice;\nvar _c;\n$RefreshReg$(_c, \"AddInvoice\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Alert","axios","jsxDEV","_jsxDEV","AddInvoice","invoiceType","_s","initialState","type","invoiceDate","Date","toISOString","split","dueDate","invoiceNo","partnerId","creditTerm","reference","invoiceTotal","invoiceItems","invoiceData","setInvoiceData","partners","setPartners","products","setProducts","productId","setProductId","quantity","setQuantity","alert","setAlert","navigate","fetchData","partnersRes","productsRes","invoicesRes","Promise","all","get","data","formattedProducts","map","product","rate","Number","salesTax","nextInvoiceNumber","String","length","padStart","prev","error","message","handleChange","e","name","value","target","handleCreditTermChange","parseInt","setDate","getDate","addProduct","selectedProduct","find","_id","valueOfSupplies","netAmount","newItem","productName","toFixed","handleRemoveInvoiceItem","index","updatedItems","filter","_","i","newTotal","reduce","sum","item","parseFloat","handleSubmit","preventDefault","console","log","JSON","stringify","response","post","status","_error$response","_error$response2","_error$response2$data","handleCancel","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","readOnly","onChange","required","partner","firstName","lastName","min","onClick","_c","$RefreshReg$"],"sources":["D:/usercode/FinGenius/frontend/src/components/AddInvoice.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Alert from \"./Alert\";\r\nimport axios from \"axios\";\r\n\r\nconst AddInvoice = ({ invoiceType }) => {\r\n  const initialState = {\r\n    type: invoiceType,\r\n    invoiceDate: new Date().toISOString().split(\"T\")[0],\r\n    dueDate: \"\",\r\n    invoiceNo: \"\",\r\n    partnerId: \"\",\r\n    creditTerm: 0,\r\n    reference: \"\",\r\n    invoiceTotal: 0,\r\n    invoiceItems: [],\r\n  };\r\n\r\n  const [invoiceData, setInvoiceData] = useState(initialState);\r\n  const [partners, setPartners] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [productId, setProductId] = useState(\"\");\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [alert, setAlert] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch initial data for partners, products, and invoice number\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [partnersRes, productsRes, invoicesRes] = await Promise.all([\r\n          axios.get(\r\n            `/partners?type=${\r\n              invoiceType === \"sales\" ? \"customer\" : \"vendor\"\r\n            }&status=Active`\r\n          ),\r\n          axios.get(\"/products?status=Active\"),\r\n          axios.get(`/invoices?type=${invoiceType}`),\r\n        ]);\r\n\r\n        // Set partners data\r\n        setPartners(partnersRes.data);\r\n\r\n        // Set products data (ensure rate and salesTax are numeric)\r\n        const formattedProducts = productsRes.data.map((product) => ({\r\n          ...product,\r\n          rate: Number(product.rate) || 0,\r\n          salesTax: Number(product.salesTax) || 0,\r\n        }));\r\n        setProducts(formattedProducts);\r\n\r\n        // Generate invoice number\r\n        const nextInvoiceNumber = `${\r\n          invoiceType === \"sales\" ? \"SI\" : \"PI\"\r\n        }-${String(invoicesRes.data.length + 1).padStart(4, \"0\")}`;\r\n        setInvoiceData((prev) => ({ ...prev, invoiceNo: nextInvoiceNumber }));\r\n      } catch (error) {\r\n        setAlert({\r\n          type: \"error\",\r\n          message: \"Failed to load initial data. Please try again.\",\r\n        });\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [invoiceType]);\r\n\r\n  // Handle input changes\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setInvoiceData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Handle credit term change and calculate due date\r\n  const handleCreditTermChange = (e) => {\r\n    const creditTerm = parseInt(e.target.value, 10) || 0;\r\n    const dueDate = new Date();\r\n    dueDate.setDate(dueDate.getDate() + creditTerm);\r\n\r\n    setInvoiceData((prev) => ({\r\n      ...prev,\r\n      creditTerm,\r\n      dueDate: dueDate.toISOString().split(\"T\")[0],\r\n    }));\r\n  };\r\n\r\n  // Add product to invoice items\r\n  const addProduct = () => {\r\n    const selectedProduct = products.find((product) => product._id === productId);\r\n    if (selectedProduct && quantity > 0) {\r\n      const rate = Number(selectedProduct.rate);\r\n      const valueOfSupplies = quantity * rate;\r\n      const salesTax = (valueOfSupplies * selectedProduct.salesTax) / 100;\r\n      const netAmount = valueOfSupplies + salesTax;\r\n\r\n      const newItem = {\r\n        productId,\r\n        productName: selectedProduct.name,\r\n        quantity: Number(quantity),\r\n        rate: rate.toFixed(2),\r\n        valueOfSupplies: valueOfSupplies.toFixed(2),\r\n        salesTax: salesTax.toFixed(2),\r\n        netAmount: netAmount.toFixed(2),\r\n      };\r\n\r\n      setInvoiceData((prev) => ({\r\n        ...prev,\r\n        invoiceItems: [...prev.invoiceItems, newItem],\r\n        invoiceTotal: prev.invoiceTotal + netAmount,\r\n      }));\r\n\r\n      setProductId(\"\");\r\n      setQuantity(1);\r\n    } else {\r\n      setAlert({ type: \"error\", message: \"Please select a product and enter quantity.\" });\r\n    }\r\n  };\r\n\r\n  // Remove product from invoice items\r\n  const handleRemoveInvoiceItem = (index) => {\r\n    const updatedItems = invoiceData.invoiceItems.filter((_, i) => i !== index);\r\n    const newTotal = updatedItems.reduce((sum, item) => sum + parseFloat(item.netAmount), 0);\r\n\r\n    setInvoiceData((prev) => ({\r\n      ...prev,\r\n      invoiceItems: updatedItems,\r\n      invoiceTotal: newTotal,\r\n    }));\r\n  };\r\n\r\n  // Submit invoice data\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Final Invoice Data being sent:\", JSON.stringify(invoiceData, null, 2));\r\n\r\n    try {\r\n      const response = await axios.post(\"/invoices\", invoiceData);\r\n      if (response.status === 201) {\r\n        setAlert({ type: \"success\", message: \"Invoice added successfully!\" });\r\n        navigate(`/${invoiceType}invoices`);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error response:\", error.response?.data || error.message);\r\n      setAlert({\r\n        type: \"error\",\r\n        message: error.response?.data?.message || \"Failed to add invoice. Please try again.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  // Cancel action\r\n  const handleCancel = () => {\r\n    navigate(`/${invoiceType}invoices`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      {alert && <Alert type={alert.type} message={alert.message} />}\r\n      <div className=\"card shadow-lg border-0\">\r\n        <div className=\"card-header bg-gradient-primary text-white\">\r\n          <h3 className=\"text-center mb-0\">\r\n            Add {invoiceType === \"sales\" ? \"Sales\" : \"Purchase\"} Invoice\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <form onSubmit={handleSubmit}>\r\n            {/* Invoice Details */}\r\n            <h5 className=\"mb-3\">Invoice Details</h5>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-6 mb-3\">\r\n                <label>Invoice No</label>\r\n                <input type=\"text\" className=\"form-control\" value={invoiceData.invoiceNo} readOnly />\r\n              </div>\r\n              <div className=\"col-md-6 mb-3\">\r\n                <label>{invoiceType === \"sales\" ? \"Customer\" : \"Vendor\"}</label>\r\n                <select\r\n                  className=\"form-select\"\r\n                  name=\"partnerId\"\r\n                  value={invoiceData.partnerId}\r\n                  onChange={handleChange}\r\n                  required\r\n                >\r\n                  <option value=\"\">Select</option>\r\n                  {partners.map((partner) => (\r\n                    <option key={partner._id} value={partner._id}>\r\n                      {partner.firstName} {partner.lastName}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"col-md-6 mb-3\">\r\n                <label>Credit Term (days)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  value={invoiceData.creditTerm}\r\n                  onChange={handleCreditTermChange}\r\n                />\r\n              </div>\r\n              <div className=\"col-md-6 mb-3\">\r\n                <label>Due Date</label>\r\n                <input type=\"date\" className=\"form-control\" value={invoiceData.dueDate} readOnly />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Invoice Items */}\r\n            <h5 className=\"mb-3\">Invoice Items</h5>\r\n            <div className=\"row mb-3\">\r\n              <div className=\"col-md-4\">\r\n                <label>Product</label>\r\n                <select\r\n                  className=\"form-select\"\r\n                  value={productId}\r\n                  onChange={(e) => setProductId(e.target.value)}\r\n                >\r\n                  <option value=\"\">Select Product</option>\r\n                  {products.map((product) => (\r\n                    <option key={product._id} value={product._id}>\r\n                      {product.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"col-md-3\">\r\n                <label>Quantity</label>\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"form-control\"\r\n                  value={quantity}\r\n                  onChange={(e) => setQuantity(Number(e.target.value))}\r\n                  min=\"1\"\r\n                />\r\n              </div>\r\n              <div className=\"col-md-3 mt-4\">\r\n                <button type=\"button\" className=\"btn btn-success\" onClick={addProduct}>\r\n                  Add Product\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Items Table */}\r\n            {invoiceData.invoiceItems.length > 0 && (\r\n              <table className=\"table table-striped\">\r\n                <thead>\r\n                  <tr>\r\n                    <th>Product</th>\r\n                    <th>Quantity</th>\r\n                    <th>Rate</th>\r\n                    <th>Value</th>\r\n                    <th>Tax</th>\r\n                    <th>Net Amount</th>\r\n                    <th>Actions</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {invoiceData.invoiceItems.map((item, index) => (\r\n                    <tr key={index}>\r\n                      <td>{item.productName}</td>\r\n                      <td>{item.quantity}</td>\r\n                      <td>${item.rate}</td>\r\n                      <td>${item.valueOfSupplies}</td>\r\n                      <td>${item.salesTax}</td>\r\n                      <td>${item.netAmount}</td>\r\n                      <td>\r\n                        <button\r\n                          className=\"btn btn-danger btn-sm\"\r\n                          onClick={() => handleRemoveInvoiceItem(index)}\r\n                        >\r\n                          Remove\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            )}\r\n\r\n            <div className=\"text-center\">\r\n              <button type=\"submit\" className=\"btn btn-success me-3\">\r\n                Submit\r\n              </button>\r\n              <button type=\"button\" className=\"btn btn-danger\" onClick={handleCancel}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddInvoice;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}