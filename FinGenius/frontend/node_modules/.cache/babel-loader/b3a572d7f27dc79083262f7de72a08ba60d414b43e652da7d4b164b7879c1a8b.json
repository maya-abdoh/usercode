{"ast":null,"code":"var _jsxFileName = \"D:\\\\usercode\\\\FinGenius\\\\frontend\\\\src\\\\components\\\\AddInvoice.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Alert from \"./Alert\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddInvoice = ({\n  invoiceType\n}) => {\n  _s();\n  const initialState = {\n    type: invoiceType,\n    invoiceDate: new Date().toISOString().split(\"T\")[0],\n    dueDate: \"\",\n    invoiceNo: \"\",\n    partnerId: \"\",\n    creditTerm: 0,\n    reference: \"\",\n    invoiceTotal: 0,\n    invoiceItems: []\n  };\n  const [invoiceData, setInvoiceData] = useState(initialState);\n  const [partners, setPartners] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [productId, setProductId] = useState(\"\");\n  const [quantity, setQuantity] = useState(1);\n  const [alert, setAlert] = useState(null);\n  const navigate = useNavigate();\n\n  // Fetch data (partners, products, and generate invoice number)\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const [partnersRes, productsRes, invoicesRes] = await Promise.all([axios.get(`/partners?type=${invoiceType === \"sales\" ? \"customer\" : \"vendor\"}&status=Active`), axios.get(\"/products?status=Active\"), axios.get(`/invoices?type=${invoiceType}`)]);\n\n        // Set partners\n        setPartners(partnersRes.data);\n\n        // Format products: ensure rate is a number\n        const formattedProducts = productsRes.data.map(product => ({\n          ...product,\n          rate: Number(product.rate) || 0 // Ensure rate is a number\n        }));\n        setProducts(formattedProducts);\n\n        // Generate next invoice number\n        const nextInvoiceNumber = `${invoiceType === \"sales\" ? \"SI\" : \"PI\"}-${String(invoicesRes.data.length + 1).padStart(4, \"0\")}`;\n        setInvoiceData(prev => ({\n          ...prev,\n          invoiceNo: nextInvoiceNumber\n        }));\n      } catch (error) {\n        setAlert({\n          type: \"error\",\n          message: \"Failed to load initial data. Please try again.\"\n        });\n      }\n    };\n    fetchData();\n  }, [invoiceType]);\n\n  // Handle input changes for invoice data\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setInvoiceData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Handle credit term change and calculate due date\n  const handleCreditTermChange = e => {\n    const creditTerm = parseInt(e.target.value, 10) || 0;\n    const dueDate = new Date();\n    dueDate.setDate(dueDate.getDate() + creditTerm);\n    setInvoiceData(prev => ({\n      ...prev,\n      creditTerm,\n      dueDate: dueDate.toISOString().split(\"T\")[0]\n    }));\n  };\n\n  // Add product to invoice items\n  const addProduct = () => {\n    const selectedProduct = products.find(product => product._id === productId);\n    if (selectedProduct && quantity > 0) {\n      const rate = Number(selectedProduct.rate) || 0; // Ensure rate is a number\n      const valueOfSupplies = quantity * rate;\n      const salesTax = valueOfSupplies * selectedProduct.salesTax / 100;\n      const netAmount = valueOfSupplies + salesTax;\n      const newItem = {\n        productId,\n        productName: selectedProduct.name,\n        quantity,\n        rate,\n        valueOfSupplies,\n        salesTax,\n        netAmount\n      };\n      setInvoiceData(prev => ({\n        ...prev,\n        invoiceTotal: prev.invoiceTotal + netAmount,\n        invoiceItems: [...prev.invoiceItems, newItem]\n      }));\n      setProductId(\"\");\n      setQuantity(1);\n    } else {\n      setAlert({\n        type: \"error\",\n        message: \"Please select a product and enter quantity.\"\n      });\n    }\n  };\n\n  // Remove product from invoice items\n  const handleRemoveInvoiceItem = index => {\n    const updatedItems = invoiceData.invoiceItems.filter((_, i) => i !== index);\n    const newTotal = updatedItems.reduce((sum, item) => sum + item.netAmount, 0);\n    setInvoiceData(prev => ({\n      ...prev,\n      invoiceItems: updatedItems,\n      invoiceTotal: newTotal\n    }));\n  };\n\n  // Submit the invoice\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(\"/invoices\", invoiceData);\n      if (response.status === 201) {\n        setAlert({\n          type: \"success\",\n          message: \"Invoice added successfully!\"\n        });\n        setInvoiceData(initialState);\n        navigate(`/${invoiceType}invoices`);\n      }\n    } catch (error) {\n      setAlert({\n        type: \"error\",\n        message: \"Failed to add invoice. Please try again.\"\n      });\n    }\n  };\n  const handleCancel = () => {\n    navigate(`/${invoiceType}invoices`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [alert && /*#__PURE__*/_jsxDEV(Alert, {\n      type: alert.type,\n      message: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow-lg border-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header bg-gradient-primary text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center mb-0\",\n          children: [\"Add \", invoiceType === \"sales\" ? \"Sales\" : \"Purchase\", \" Invoice\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"accordion\",\n            id: \"invoiceFormAccordion\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"accordion-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"accordion-header\",\n                id: \"invoiceDetailsHeading\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"accordion-button\",\n                  type: \"button\",\n                  \"data-bs-toggle\": \"collapse\",\n                  \"data-bs-target\": \"#invoiceDetails\",\n                  \"aria-expanded\": \"true\",\n                  \"aria-controls\": \"invoiceDetails\",\n                  children: \"Invoice Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 165,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"invoiceDetails\",\n                className: \"accordion-collapse collapse show\",\n                \"aria-labelledby\": \"invoiceDetailsHeading\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"accordion-body\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Invoice No\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 184,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control\",\n                        value: invoiceData.invoiceNo,\n                        readOnly: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 185,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 183,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: invoiceType === \"sales\" ? \"Customer\" : \"Vendor\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 188,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"form-select\",\n                        name: \"partnerId\",\n                        value: invoiceData.partnerId,\n                        onChange: handleChange,\n                        required: true,\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: \"Select\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 196,\n                          columnNumber: 27\n                        }, this), partners.map(partner => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: partner._id,\n                          children: [partner.firstName, \" \", partner.lastName]\n                        }, partner._id, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 198,\n                          columnNumber: 29\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 189,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Credit Term (days)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 205,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"form-control\",\n                        value: invoiceData.creditTerm,\n                        onChange: handleCreditTermChange\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 206,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 204,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Due Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 214,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"date\",\n                        className: \"form-control\",\n                        value: invoiceData.dueDate,\n                        readOnly: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 215,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 213,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 182,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 181,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"accordion-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"accordion-header\",\n                id: \"invoiceItemsHeading\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"accordion-button collapsed\",\n                  type: \"button\",\n                  \"data-bs-toggle\": \"collapse\",\n                  \"data-bs-target\": \"#invoiceItems\",\n                  \"aria-expanded\": \"false\",\n                  \"aria-controls\": \"invoiceItems\",\n                  children: \"Invoice Items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"invoiceItems\",\n                className: \"accordion-collapse collapse\",\n                \"aria-labelledby\": \"invoiceItemsHeading\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"accordion-body\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-4 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 240,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"form-select\",\n                        value: productId,\n                        onChange: e => setProductId(e.target.value),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: \"Select Product\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 246,\n                          columnNumber: 27\n                        }, this), products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: product._id,\n                          children: product.name\n                        }, product._id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 248,\n                          columnNumber: 29\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 241,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 239,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-3 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        children: \"Quantity\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 255,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"form-control\",\n                        value: quantity,\n                        onChange: e => setQuantity(Number(e.target.value)),\n                        min: \"1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 256,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 254,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-3 mt-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"btn btn-outline-success\",\n                        onClick: addProduct,\n                        children: \"Add Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 265,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 21\n                  }, this), invoiceData.invoiceItems.length > 0 && /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table mt-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Product\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 276,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Quantity\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 277,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Rate\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 278,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Value\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 279,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Tax\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 280,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Net Amount\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 281,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Actions\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 282,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 275,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: invoiceData.invoiceItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: item.productName\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 288,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: item.quantity\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 289,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.rate.toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 290,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.valueOfSupplies.toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 291,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.salesTax.toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 292,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.netAmount.toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 293,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"button\", {\n                            className: \"btn btn-sm btn-danger\",\n                            onClick: () => handleRemoveInvoiceItem(index),\n                            children: \"Remove\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 295,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 294,\n                          columnNumber: 31\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 287,\n                        columnNumber: 29\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 285,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-success me-3\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-danger\",\n              onClick: handleCancel,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }, this);\n};\n_s(AddInvoice, \"JA7OKCqFWPUL6/ZGO51utdc6Or0=\", false, function () {\n  return [useNavigate];\n});\n_c = AddInvoice;\nexport default AddInvoice;\nvar _c;\n$RefreshReg$(_c, \"AddInvoice\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Alert","axios","jsxDEV","_jsxDEV","AddInvoice","invoiceType","_s","initialState","type","invoiceDate","Date","toISOString","split","dueDate","invoiceNo","partnerId","creditTerm","reference","invoiceTotal","invoiceItems","invoiceData","setInvoiceData","partners","setPartners","products","setProducts","productId","setProductId","quantity","setQuantity","alert","setAlert","navigate","fetchData","partnersRes","productsRes","invoicesRes","Promise","all","get","data","formattedProducts","map","product","rate","Number","nextInvoiceNumber","String","length","padStart","prev","error","message","handleChange","e","name","value","target","handleCreditTermChange","parseInt","setDate","getDate","addProduct","selectedProduct","find","_id","valueOfSupplies","salesTax","netAmount","newItem","productName","handleRemoveInvoiceItem","index","updatedItems","filter","_","i","newTotal","reduce","sum","item","handleSubmit","preventDefault","response","post","status","handleCancel","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","id","readOnly","onChange","required","partner","firstName","lastName","min","onClick","toFixed","_c","$RefreshReg$"],"sources":["D:/usercode/FinGenius/frontend/src/components/AddInvoice.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Alert from \"./Alert\";\r\nimport axios from \"axios\";\r\n\r\nconst AddInvoice = ({ invoiceType }) => {\r\n  const initialState = {\r\n    type: invoiceType,\r\n    invoiceDate: new Date().toISOString().split(\"T\")[0],\r\n    dueDate: \"\",\r\n    invoiceNo: \"\",\r\n    partnerId: \"\",\r\n    creditTerm: 0,\r\n    reference: \"\",\r\n    invoiceTotal: 0,\r\n    invoiceItems: [],\r\n  };\r\n\r\n  const [invoiceData, setInvoiceData] = useState(initialState);\r\n  const [partners, setPartners] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [productId, setProductId] = useState(\"\");\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [alert, setAlert] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // Fetch data (partners, products, and generate invoice number)\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const [partnersRes, productsRes, invoicesRes] = await Promise.all([\r\n          axios.get(\r\n            `/partners?type=${\r\n              invoiceType === \"sales\" ? \"customer\" : \"vendor\"\r\n            }&status=Active`\r\n          ),\r\n          axios.get(\"/products?status=Active\"),\r\n          axios.get(`/invoices?type=${invoiceType}`),\r\n        ]);\r\n\r\n        // Set partners\r\n        setPartners(partnersRes.data);\r\n\r\n        // Format products: ensure rate is a number\r\n        const formattedProducts = productsRes.data.map((product) => ({\r\n          ...product,\r\n          rate: Number(product.rate) || 0, // Ensure rate is a number\r\n        }));\r\n        setProducts(formattedProducts);\r\n\r\n        // Generate next invoice number\r\n        const nextInvoiceNumber = `${\r\n          invoiceType === \"sales\" ? \"SI\" : \"PI\"\r\n        }-${String(invoicesRes.data.length + 1).padStart(4, \"0\")}`;\r\n\r\n        setInvoiceData((prev) => ({ ...prev, invoiceNo: nextInvoiceNumber }));\r\n      } catch (error) {\r\n        setAlert({\r\n          type: \"error\",\r\n          message: \"Failed to load initial data. Please try again.\",\r\n        });\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [invoiceType]);\r\n\r\n  // Handle input changes for invoice data\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setInvoiceData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  // Handle credit term change and calculate due date\r\n  const handleCreditTermChange = (e) => {\r\n    const creditTerm = parseInt(e.target.value, 10) || 0;\r\n    const dueDate = new Date();\r\n    dueDate.setDate(dueDate.getDate() + creditTerm);\r\n\r\n    setInvoiceData((prev) => ({\r\n      ...prev,\r\n      creditTerm,\r\n      dueDate: dueDate.toISOString().split(\"T\")[0],\r\n    }));\r\n  };\r\n\r\n  // Add product to invoice items\r\n  const addProduct = () => {\r\n    const selectedProduct = products.find((product) => product._id === productId);\r\n    if (selectedProduct && quantity > 0) {\r\n      const rate = Number(selectedProduct.rate) || 0; // Ensure rate is a number\r\n      const valueOfSupplies = quantity * rate;\r\n      const salesTax = (valueOfSupplies * selectedProduct.salesTax) / 100;\r\n      const netAmount = valueOfSupplies + salesTax;\r\n\r\n      const newItem = {\r\n        productId,\r\n        productName: selectedProduct.name,\r\n        quantity,\r\n        rate,\r\n        valueOfSupplies,\r\n        salesTax,\r\n        netAmount,\r\n      };\r\n\r\n      setInvoiceData((prev) => ({\r\n        ...prev,\r\n        invoiceTotal: prev.invoiceTotal + netAmount,\r\n        invoiceItems: [...prev.invoiceItems, newItem],\r\n      }));\r\n\r\n      setProductId(\"\");\r\n      setQuantity(1);\r\n    } else {\r\n      setAlert({ type: \"error\", message: \"Please select a product and enter quantity.\" });\r\n    }\r\n  };\r\n\r\n  // Remove product from invoice items\r\n  const handleRemoveInvoiceItem = (index) => {\r\n    const updatedItems = invoiceData.invoiceItems.filter((_, i) => i !== index);\r\n    const newTotal = updatedItems.reduce((sum, item) => sum + item.netAmount, 0);\r\n\r\n    setInvoiceData((prev) => ({\r\n      ...prev,\r\n      invoiceItems: updatedItems,\r\n      invoiceTotal: newTotal,\r\n    }));\r\n  };\r\n\r\n  // Submit the invoice\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post(\"/invoices\", invoiceData);\r\n      if (response.status === 201) {\r\n        setAlert({ type: \"success\", message: \"Invoice added successfully!\" });\r\n        setInvoiceData(initialState);\r\n        navigate(`/${invoiceType}invoices`);\r\n      }\r\n    } catch (error) {\r\n      setAlert({ type: \"error\", message: \"Failed to add invoice. Please try again.\" });\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    navigate(`/${invoiceType}invoices`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      {alert && <Alert type={alert.type} message={alert.message} />}\r\n      <div className=\"card shadow-lg border-0\">\r\n        <div className=\"card-header bg-gradient-primary text-white\">\r\n          <h3 className=\"text-center mb-0\">\r\n            Add {invoiceType === \"sales\" ? \"Sales\" : \"Purchase\"} Invoice\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"accordion\" id=\"invoiceFormAccordion\">\r\n              {/* Invoice Details Section */}\r\n              <div className=\"accordion-item\">\r\n                <h2 className=\"accordion-header\" id=\"invoiceDetailsHeading\">\r\n                  <button\r\n                    className=\"accordion-button\"\r\n                    type=\"button\"\r\n                    data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#invoiceDetails\"\r\n                    aria-expanded=\"true\"\r\n                    aria-controls=\"invoiceDetails\"\r\n                  >\r\n                    Invoice Details\r\n                  </button>\r\n                </h2>\r\n                <div\r\n                  id=\"invoiceDetails\"\r\n                  className=\"accordion-collapse collapse show\"\r\n                  aria-labelledby=\"invoiceDetailsHeading\"\r\n                >\r\n                  <div className=\"accordion-body\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-6 mb-3\">\r\n                        <label>Invoice No</label>\r\n                        <input type=\"text\" className=\"form-control\" value={invoiceData.invoiceNo} readOnly />\r\n                      </div>\r\n                      <div className=\"col-md-6 mb-3\">\r\n                        <label>{invoiceType === \"sales\" ? \"Customer\" : \"Vendor\"}</label>\r\n                        <select\r\n                          className=\"form-select\"\r\n                          name=\"partnerId\"\r\n                          value={invoiceData.partnerId}\r\n                          onChange={handleChange}\r\n                          required\r\n                        >\r\n                          <option value=\"\">Select</option>\r\n                          {partners.map((partner) => (\r\n                            <option key={partner._id} value={partner._id}>\r\n                              {partner.firstName} {partner.lastName}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"col-md-6 mb-3\">\r\n                        <label>Credit Term (days)</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"form-control\"\r\n                          value={invoiceData.creditTerm}\r\n                          onChange={handleCreditTermChange}\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-6 mb-3\">\r\n                        <label>Due Date</label>\r\n                        <input type=\"date\" className=\"form-control\" value={invoiceData.dueDate} readOnly />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Invoice Items Section */}\r\n              <div className=\"accordion-item\">\r\n                <h2 className=\"accordion-header\" id=\"invoiceItemsHeading\">\r\n                  <button\r\n                    className=\"accordion-button collapsed\"\r\n                    type=\"button\"\r\n                    data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#invoiceItems\"\r\n                    aria-expanded=\"false\"\r\n                    aria-controls=\"invoiceItems\"\r\n                  >\r\n                    Invoice Items\r\n                  </button>\r\n                </h2>\r\n                <div id=\"invoiceItems\" className=\"accordion-collapse collapse\" aria-labelledby=\"invoiceItemsHeading\">\r\n                  <div className=\"accordion-body\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-4 mb-3\">\r\n                        <label>Product</label>\r\n                        <select\r\n                          className=\"form-select\"\r\n                          value={productId}\r\n                          onChange={(e) => setProductId(e.target.value)}\r\n                        >\r\n                          <option value=\"\">Select Product</option>\r\n                          {products.map((product) => (\r\n                            <option key={product._id} value={product._id}>\r\n                              {product.name}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"col-md-3 mb-3\">\r\n                        <label>Quantity</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"form-control\"\r\n                          value={quantity}\r\n                          onChange={(e) => setQuantity(Number(e.target.value))}\r\n                          min=\"1\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-3 mt-4\">\r\n                        <button type=\"button\" className=\"btn btn-outline-success\" onClick={addProduct}>\r\n                          Add Product\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Invoice Items Table */}\r\n                    {invoiceData.invoiceItems.length > 0 && (\r\n                      <table className=\"table mt-3\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Product</th>\r\n                            <th>Quantity</th>\r\n                            <th>Rate</th>\r\n                            <th>Value</th>\r\n                            <th>Tax</th>\r\n                            <th>Net Amount</th>\r\n                            <th>Actions</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {invoiceData.invoiceItems.map((item, index) => (\r\n                            <tr key={index}>\r\n                              <td>{item.productName}</td>\r\n                              <td>{item.quantity}</td>\r\n                              <td>${item.rate.toFixed(2)}</td>\r\n                              <td>${item.valueOfSupplies.toFixed(2)}</td>\r\n                              <td>${item.salesTax.toFixed(2)}</td>\r\n                              <td>${item.netAmount.toFixed(2)}</td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"btn btn-sm btn-danger\"\r\n                                  onClick={() => handleRemoveInvoiceItem(index)}\r\n                                >\r\n                                  Remove\r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-center mt-4\">\r\n              <button type=\"submit\" className=\"btn btn-success me-3\">\r\n                Submit\r\n              </button>\r\n              <button type=\"button\" className=\"btn btn-danger\" onClick={handleCancel}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddInvoice;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}