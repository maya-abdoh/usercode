{"ast":null,"code":"var _jsxFileName = \"D:\\\\usercode\\\\FinGenius\\\\frontend\\\\src\\\\components\\\\AddInvoice.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport Alert from \"./Alert\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddInvoice = ({\n  invoiceType\n}) => {\n  _s();\n  const initialState = {\n    type: invoiceType,\n    invoiceDate: new Date().toISOString().split(\"T\")[0],\n    dueDate: \"\",\n    invoiceNo: \"\",\n    partnerId: \"\",\n    creditTerm: 0,\n    reference: \"\",\n    invoiceTotal: 0,\n    invoiceItems: []\n  };\n  const [invoiceData, setInvoiceData] = useState(initialState);\n  const [partners, setPartners] = useState([]);\n  const [products, setProducts] = useState([]);\n  const [productId, setProductId] = useState(\"\");\n  const [quantity, setQuantity] = useState(1);\n  const [alert, setAlert] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch partners and products\n        const [partnersRes, productsRes] = await Promise.all([axios.get(`/partners?type=${invoiceType === \"sales\" ? \"customer\" : \"vendor\"}&status=Active`), axios.get(\"/products?status=Active\")]);\n        setPartners(partnersRes.data);\n        setProducts(productsRes.data);\n\n        // Generate invoice number\n        const invoicesRes = await axios.get(`/invoices?type=${invoiceType}`);\n        const nextInvoiceNumber = `${invoiceType === \"sales\" ? \"SI\" : \"PI\"}-${String(invoicesRes.data.length + 1).padStart(4, \"0\")}`;\n        setInvoiceData(prev => ({\n          ...prev,\n          invoiceNo: nextInvoiceNumber\n        }));\n      } catch (error) {\n        setAlert({\n          type: \"error\",\n          message: \"Failed to load initial data.\"\n        });\n      }\n    };\n    fetchData();\n  }, [invoiceType]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setInvoiceData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleCreditTermChange = e => {\n    const creditTerm = parseInt(e.target.value, 10) || 0;\n    const dueDate = new Date();\n    dueDate.setDate(dueDate.getDate() + creditTerm);\n    setInvoiceData(prev => ({\n      ...prev,\n      creditTerm,\n      dueDate: dueDate.toISOString().split(\"T\")[0]\n    }));\n  };\n  const addProduct = () => {\n    const selectedProduct = products.find(product => product._id === productId);\n    if (selectedProduct && quantity > 0) {\n      const valueOfSupplies = quantity * selectedProduct.rate;\n      const salesTax = valueOfSupplies * selectedProduct.salesTax / 100;\n      const netAmount = valueOfSupplies + salesTax;\n      const newItem = {\n        productId,\n        productName: selectedProduct.name,\n        quantity,\n        rate: selectedProduct.rate,\n        valueOfSupplies,\n        salesTax,\n        netAmount\n      };\n      setInvoiceData(prev => ({\n        ...prev,\n        invoiceTotal: prev.invoiceTotal + netAmount,\n        invoiceItems: [...prev.invoiceItems, newItem]\n      }));\n      setProductId(\"\");\n      setQuantity(1);\n    }\n  };\n  const handleRemoveInvoiceItem = index => {\n    const updatedItems = invoiceData.invoiceItems.filter((_, i) => i !== index);\n    const newTotal = updatedItems.reduce((sum, item) => sum + item.netAmount, 0);\n    setInvoiceData(prev => ({\n      ...prev,\n      invoiceItems: updatedItems,\n      invoiceTotal: newTotal\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.post(\"/invoices\", invoiceData);\n      if (response.status === 201) {\n        setAlert({\n          type: \"success\",\n          message: \"Invoice added successfully!\"\n        });\n        setInvoiceData(initialState);\n        navigate(`/${invoiceType}invoices`);\n      }\n    } catch (error) {\n      setAlert({\n        type: \"error\",\n        message: \"Failed to add invoice.\"\n      });\n    }\n  };\n  const handleCancel = () => {\n    navigate(`/${invoiceType}invoices`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: [alert && /*#__PURE__*/_jsxDEV(Alert, {\n      type: alert.type,\n      message: alert.message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow-lg border-0\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-header bg-gradient-primary text-white\",\n        children: /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-center mb-0\",\n          children: [\"Add \", invoiceType === \"sales\" ? \"Sales\" : \"Purchase\", \" Invoice\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"accordion\",\n            id: \"invoiceFormAccordion\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"accordion-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"accordion-header\",\n                id: \"invoiceDetailsHeading\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"accordion-button\",\n                  type: \"button\",\n                  \"data-bs-toggle\": \"collapse\",\n                  \"data-bs-target\": \"#invoiceDetails\",\n                  \"aria-expanded\": \"true\",\n                  \"aria-controls\": \"invoiceDetails\",\n                  children: \"Invoice Details\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"invoiceDetails\",\n                className: \"accordion-collapse collapse show\",\n                \"aria-labelledby\": \"invoiceDetailsHeading\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"accordion-body\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"invoiceNo\",\n                        className: \"form-label\",\n                        children: \"Invoice No\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 165,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"text\",\n                        className: \"form-control\",\n                        id: \"invoiceNo\",\n                        value: invoiceData.invoiceNo,\n                        readOnly: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 168,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"partnerId\",\n                        className: \"form-label\",\n                        children: invoiceType === \"sales\" ? \"Customer\" : \"Vendor\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 177,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"form-select\",\n                        id: \"partnerId\",\n                        name: \"partnerId\",\n                        value: invoiceData.partnerId,\n                        onChange: handleChange,\n                        required: true,\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: \"Select\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 188,\n                          columnNumber: 27\n                        }, this), partners.map(partner => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: partner._id,\n                          children: [partner.firstName, \" \", partner.lastName]\n                        }, partner._id, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 190,\n                          columnNumber: 29\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 180,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"creditTerm\",\n                        className: \"form-label\",\n                        children: \"Credit Term (days)\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 199,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"form-control\",\n                        id: \"creditTerm\",\n                        name: \"creditTerm\",\n                        value: invoiceData.creditTerm,\n                        onChange: handleCreditTermChange,\n                        required: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 202,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 198,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-6 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        htmlFor: \"dueDate\",\n                        className: \"form-label\",\n                        children: \"Due Date\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 213,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"date\",\n                        className: \"form-control\",\n                        id: \"dueDate\",\n                        value: invoiceData.dueDate,\n                        readOnly: true\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 216,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 157,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"accordion-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                className: \"accordion-header\",\n                id: \"invoiceItemsHeading\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"accordion-button collapsed\",\n                  type: \"button\",\n                  \"data-bs-toggle\": \"collapse\",\n                  \"data-bs-target\": \"#invoiceItems\",\n                  \"aria-expanded\": \"false\",\n                  \"aria-controls\": \"invoiceItems\",\n                  children: \"Invoice Items\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                id: \"invoiceItems\",\n                className: \"accordion-collapse collapse\",\n                \"aria-labelledby\": \"invoiceItemsHeading\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"accordion-body\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-4 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"form-label\",\n                        children: \"Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 250,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                        className: \"form-select\",\n                        value: productId,\n                        onChange: e => setProductId(e.target.value),\n                        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                          value: \"\",\n                          children: \"Select Product\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 256,\n                          columnNumber: 27\n                        }, this), products.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: product._id,\n                          children: product.name\n                        }, product._id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 258,\n                          columnNumber: 29\n                        }, this))]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 251,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 249,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-3 mb-3\",\n                      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                        className: \"form-label\",\n                        children: \"Quantity\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 265,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                        type: \"number\",\n                        className: \"form-control\",\n                        value: quantity,\n                        onChange: e => setQuantity(Number(e.target.value)),\n                        min: \"1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 266,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 264,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-md-3\",\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        type: \"button\",\n                        className: \"btn btn-outline-success mt-4\",\n                        onClick: addProduct,\n                        children: \"Add Product\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 275,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 274,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 248,\n                    columnNumber: 21\n                  }, this), invoiceData.invoiceItems.length > 0 && /*#__PURE__*/_jsxDEV(\"table\", {\n                    className: \"table mt-3\",\n                    children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                      children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Product\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 289,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Quantity\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 290,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Rate\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 291,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Value\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 292,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Tax\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 293,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Net Amount\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 294,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                          children: \"Actions\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 295,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 288,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 287,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                      children: invoiceData.invoiceItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                          children: item.productName\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 301,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: item.quantity\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 302,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.rate.toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 303,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.valueOfSupplies.toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 304,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.salesTax.toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 305,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: [\"$\", item.netAmount.toFixed(2)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 306,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                          children: /*#__PURE__*/_jsxDEV(\"button\", {\n                            className: \"btn btn-sm btn-danger\",\n                            onClick: () => handleRemoveInvoiceItem(index),\n                            children: \"Remove\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 308,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 307,\n                          columnNumber: 31\n                        }, this)]\n                      }, index, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 300,\n                        columnNumber: 29\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 298,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-center mt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-success me-3\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-danger\",\n              onClick: handleCancel,\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 133,\n    columnNumber: 5\n  }, this);\n};\n_s(AddInvoice, \"JA7OKCqFWPUL6/ZGO51utdc6Or0=\", false, function () {\n  return [useNavigate];\n});\n_c = AddInvoice;\nexport default AddInvoice;\nvar _c;\n$RefreshReg$(_c, \"AddInvoice\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","Alert","axios","jsxDEV","_jsxDEV","AddInvoice","invoiceType","_s","initialState","type","invoiceDate","Date","toISOString","split","dueDate","invoiceNo","partnerId","creditTerm","reference","invoiceTotal","invoiceItems","invoiceData","setInvoiceData","partners","setPartners","products","setProducts","productId","setProductId","quantity","setQuantity","alert","setAlert","navigate","fetchData","partnersRes","productsRes","Promise","all","get","data","invoicesRes","nextInvoiceNumber","String","length","padStart","prev","error","message","handleChange","e","name","value","target","handleCreditTermChange","parseInt","setDate","getDate","addProduct","selectedProduct","find","product","_id","valueOfSupplies","rate","salesTax","netAmount","newItem","productName","handleRemoveInvoiceItem","index","updatedItems","filter","_","i","newTotal","reduce","sum","item","handleSubmit","preventDefault","response","post","status","handleCancel","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","id","htmlFor","readOnly","onChange","required","map","partner","firstName","lastName","Number","min","onClick","toFixed","_c","$RefreshReg$"],"sources":["D:/usercode/FinGenius/frontend/src/components/AddInvoice.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Alert from \"./Alert\";\r\nimport axios from \"axios\";\r\n\r\nconst AddInvoice = ({ invoiceType }) => {\r\n  const initialState = {\r\n    type: invoiceType,\r\n    invoiceDate: new Date().toISOString().split(\"T\")[0],\r\n    dueDate: \"\",\r\n    invoiceNo: \"\",\r\n    partnerId: \"\",\r\n    creditTerm: 0,\r\n    reference: \"\",\r\n    invoiceTotal: 0,\r\n    invoiceItems: [],\r\n  };\r\n\r\n  const [invoiceData, setInvoiceData] = useState(initialState);\r\n  const [partners, setPartners] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n  const [productId, setProductId] = useState(\"\");\r\n  const [quantity, setQuantity] = useState(1);\r\n  const [alert, setAlert] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Fetch partners and products\r\n        const [partnersRes, productsRes] = await Promise.all([\r\n          axios.get(\r\n            `/partners?type=${\r\n              invoiceType === \"sales\" ? \"customer\" : \"vendor\"\r\n            }&status=Active`\r\n          ),\r\n          axios.get(\"/products?status=Active\"),\r\n        ]);\r\n\r\n        setPartners(partnersRes.data);\r\n        setProducts(productsRes.data);\r\n\r\n        // Generate invoice number\r\n        const invoicesRes = await axios.get(`/invoices?type=${invoiceType}`);\r\n        const nextInvoiceNumber = `${\r\n          invoiceType === \"sales\" ? \"SI\" : \"PI\"\r\n        }-${String(invoicesRes.data.length + 1).padStart(4, \"0\")}`;\r\n\r\n        setInvoiceData((prev) => ({ ...prev, invoiceNo: nextInvoiceNumber }));\r\n      } catch (error) {\r\n        setAlert({ type: \"error\", message: \"Failed to load initial data.\" });\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [invoiceType]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setInvoiceData((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleCreditTermChange = (e) => {\r\n    const creditTerm = parseInt(e.target.value, 10) || 0;\r\n    const dueDate = new Date();\r\n    dueDate.setDate(dueDate.getDate() + creditTerm);\r\n\r\n    setInvoiceData((prev) => ({\r\n      ...prev,\r\n      creditTerm,\r\n      dueDate: dueDate.toISOString().split(\"T\")[0],\r\n    }));\r\n  };\r\n\r\n  const addProduct = () => {\r\n    const selectedProduct = products.find((product) => product._id === productId);\r\n    if (selectedProduct && quantity > 0) {\r\n      const valueOfSupplies = quantity * selectedProduct.rate;\r\n      const salesTax = (valueOfSupplies * selectedProduct.salesTax) / 100;\r\n      const netAmount = valueOfSupplies + salesTax;\r\n\r\n      const newItem = {\r\n        productId,\r\n        productName: selectedProduct.name,\r\n        quantity,\r\n        rate: selectedProduct.rate,\r\n        valueOfSupplies,\r\n        salesTax,\r\n        netAmount,\r\n      };\r\n\r\n      setInvoiceData((prev) => ({\r\n        ...prev,\r\n        invoiceTotal: prev.invoiceTotal + netAmount,\r\n        invoiceItems: [...prev.invoiceItems, newItem],\r\n      }));\r\n\r\n      setProductId(\"\");\r\n      setQuantity(1);\r\n    }\r\n  };\r\n\r\n  const handleRemoveInvoiceItem = (index) => {\r\n    const updatedItems = invoiceData.invoiceItems.filter((_, i) => i !== index);\r\n    const newTotal = updatedItems.reduce((sum, item) => sum + item.netAmount, 0);\r\n\r\n    setInvoiceData((prev) => ({\r\n      ...prev,\r\n      invoiceItems: updatedItems,\r\n      invoiceTotal: newTotal,\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post(\"/invoices\", invoiceData);\r\n      if (response.status === 201) {\r\n        setAlert({ type: \"success\", message: \"Invoice added successfully!\" });\r\n        setInvoiceData(initialState);\r\n        navigate(`/${invoiceType}invoices`);\r\n      }\r\n    } catch (error) {\r\n      setAlert({ type: \"error\", message: \"Failed to add invoice.\" });\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    navigate(`/${invoiceType}invoices`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      {alert && <Alert type={alert.type} message={alert.message} />}\r\n      <div className=\"card shadow-lg border-0\">\r\n        <div className=\"card-header bg-gradient-primary text-white\">\r\n          <h3 className=\"text-center mb-0\">\r\n            Add {invoiceType === \"sales\" ? \"Sales\" : \"Purchase\"} Invoice\r\n          </h3>\r\n        </div>\r\n        <div className=\"card-body\">\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"accordion\" id=\"invoiceFormAccordion\">\r\n              <div className=\"accordion-item\">\r\n                <h2 className=\"accordion-header\" id=\"invoiceDetailsHeading\">\r\n                  <button\r\n                    className=\"accordion-button\"\r\n                    type=\"button\"\r\n                    data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#invoiceDetails\"\r\n                    aria-expanded=\"true\"\r\n                    aria-controls=\"invoiceDetails\"\r\n                  >\r\n                    Invoice Details\r\n                  </button>\r\n                </h2>\r\n                <div\r\n                  id=\"invoiceDetails\"\r\n                  className=\"accordion-collapse collapse show\"\r\n                  aria-labelledby=\"invoiceDetailsHeading\"\r\n                >\r\n                  <div className=\"accordion-body\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-6 mb-3\">\r\n                        <label htmlFor=\"invoiceNo\" className=\"form-label\">\r\n                          Invoice No\r\n                        </label>\r\n                        <input\r\n                          type=\"text\"\r\n                          className=\"form-control\"\r\n                          id=\"invoiceNo\"\r\n                          value={invoiceData.invoiceNo}\r\n                          readOnly\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-6 mb-3\">\r\n                        <label htmlFor=\"partnerId\" className=\"form-label\">\r\n                          {invoiceType === \"sales\" ? \"Customer\" : \"Vendor\"}\r\n                        </label>\r\n                        <select\r\n                          className=\"form-select\"\r\n                          id=\"partnerId\"\r\n                          name=\"partnerId\"\r\n                          value={invoiceData.partnerId}\r\n                          onChange={handleChange}\r\n                          required\r\n                        >\r\n                          <option value=\"\">Select</option>\r\n                          {partners.map((partner) => (\r\n                            <option key={partner._id} value={partner._id}>\r\n                              {partner.firstName} {partner.lastName}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-6 mb-3\">\r\n                        <label htmlFor=\"creditTerm\" className=\"form-label\">\r\n                          Credit Term (days)\r\n                        </label>\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"form-control\"\r\n                          id=\"creditTerm\"\r\n                          name=\"creditTerm\"\r\n                          value={invoiceData.creditTerm}\r\n                          onChange={handleCreditTermChange}\r\n                          required\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-6 mb-3\">\r\n                        <label htmlFor=\"dueDate\" className=\"form-label\">\r\n                          Due Date\r\n                        </label>\r\n                        <input\r\n                          type=\"date\"\r\n                          className=\"form-control\"\r\n                          id=\"dueDate\"\r\n                          value={invoiceData.dueDate}\r\n                          readOnly\r\n                        />\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"accordion-item\">\r\n                <h2 className=\"accordion-header\" id=\"invoiceItemsHeading\">\r\n                  <button\r\n                    className=\"accordion-button collapsed\"\r\n                    type=\"button\"\r\n                    data-bs-toggle=\"collapse\"\r\n                    data-bs-target=\"#invoiceItems\"\r\n                    aria-expanded=\"false\"\r\n                    aria-controls=\"invoiceItems\"\r\n                  >\r\n                    Invoice Items\r\n                  </button>\r\n                </h2>\r\n                <div\r\n                  id=\"invoiceItems\"\r\n                  className=\"accordion-collapse collapse\"\r\n                  aria-labelledby=\"invoiceItemsHeading\"\r\n                >\r\n                  <div className=\"accordion-body\">\r\n                    <div className=\"row\">\r\n                      <div className=\"col-md-4 mb-3\">\r\n                        <label className=\"form-label\">Product</label>\r\n                        <select\r\n                          className=\"form-select\"\r\n                          value={productId}\r\n                          onChange={(e) => setProductId(e.target.value)}\r\n                        >\r\n                          <option value=\"\">Select Product</option>\r\n                          {products.map((product) => (\r\n                            <option key={product._id} value={product._id}>\r\n                              {product.name}\r\n                            </option>\r\n                          ))}\r\n                        </select>\r\n                      </div>\r\n                      <div className=\"col-md-3 mb-3\">\r\n                        <label className=\"form-label\">Quantity</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          className=\"form-control\"\r\n                          value={quantity}\r\n                          onChange={(e) => setQuantity(Number(e.target.value))}\r\n                          min=\"1\"\r\n                        />\r\n                      </div>\r\n                      <div className=\"col-md-3\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-outline-success mt-4\"\r\n                          onClick={addProduct}\r\n                        >\r\n                          Add Product\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {invoiceData.invoiceItems.length > 0 && (\r\n                      <table className=\"table mt-3\">\r\n                        <thead>\r\n                          <tr>\r\n                            <th>Product</th>\r\n                            <th>Quantity</th>\r\n                            <th>Rate</th>\r\n                            <th>Value</th>\r\n                            <th>Tax</th>\r\n                            <th>Net Amount</th>\r\n                            <th>Actions</th>\r\n                          </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                          {invoiceData.invoiceItems.map((item, index) => (\r\n                            <tr key={index}>\r\n                              <td>{item.productName}</td>\r\n                              <td>{item.quantity}</td>\r\n                              <td>${item.rate.toFixed(2)}</td>\r\n                              <td>${item.valueOfSupplies.toFixed(2)}</td>\r\n                              <td>${item.salesTax.toFixed(2)}</td>\r\n                              <td>${item.netAmount.toFixed(2)}</td>\r\n                              <td>\r\n                                <button\r\n                                  className=\"btn btn-sm btn-danger\"\r\n                                  onClick={() => handleRemoveInvoiceItem(index)}\r\n                                >\r\n                                  Remove\r\n                                </button>\r\n                              </td>\r\n                            </tr>\r\n                          ))}\r\n                        </tbody>\r\n                      </table>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"text-center mt-4\">\r\n              <button type=\"submit\" className=\"btn btn-success me-3\">\r\n                Submit\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-danger\"\r\n                onClick={handleCancel}\r\n              >\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddInvoice;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}